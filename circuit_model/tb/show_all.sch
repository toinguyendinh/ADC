v {xschem version=3.0.0 file_version=1.2 }
G {}
K {}
V {}
S {}
E {}
L 4 0 -540 -0 -0 {}
L 4 -0 0 520 -0 {}
L 4 520 -0 580 -0 {}
L 4 580 -0 800 0 {}
L 4 800 -0 885 0 {}
L 4 -0 -615 -0 -540 {}
L 4 885 -0 1180 -0 {}
L 4 1180 0 1210 0 {}
L 4 1210 -0 1310 -0 {}
L 4 -0 -860 0 -610 {}
L 4 0 -940 -0 -860 {}
L 4 -0 -940 2330 -940 {}
L 4 2330 -940 2330 -0 {}
L 4 1310 0 2330 -0 {}
N 50 -180 50 -140 { lab=VDD_A}
N 50 -80 50 -40 { lab=GND}
N 255 -80 255 -40 { lab=GND}
N 255 -180 255 -140 { lab=input}
N 400 -90 400 -50 { lab=GND}
N 400 -190 400 -150 { lab=ENB}
N 980 -375 980 -355 { lab=V_ctrl}
N 980 -295 980 -270 { lab=GND}
N 865 -375 905 -375 { lab=input}
N 150 -180 150 -140 { lab=VDD_D}
N 150 -80 150 -40 { lab=GND}
N 680 -90 680 -50 { lab=GND}
N 680 -190 680 -150 { lab=CLK}
N 1800 -850 1820 -850 { lab=DFF_1_0}
N 2020 -870 2040 -870 { lab=DFF_2_0}
N 2160 -890 2220 -890 { lab=out_0}
N 1580 -850 1620 -850 { lab=CLK}
N 1580 -830 1620 -830 { lab=vco_0}
N 1820 -910 2040 -910 { lab=DFF_1_0}
N 1820 -850 1840 -850 { lab=DFF_1_0}
N 1840 -900 1840 -870 { lab=CLK}
N 1810 -910 1820 -910 { lab=DFF_1_0}
N 1810 -910 1810 -850 { lab=DFF_1_0}
N 2040 -910 2060 -910 { lab=DFF_1_0}
N 2040 -870 2060 -870 { lab=DFF_2_0}
N 1805 -740 1825 -740 { lab=DFF_1_1}
N 2025 -760 2045 -760 { lab=DFF_2_1}
N 2165 -780 2225 -780 { lab=out_1}
N 1585 -740 1625 -740 { lab=CLK}
N 1585 -720 1625 -720 { lab=vco_1}
N 1825 -800 2045 -800 { lab=DFF_1_1}
N 1825 -740 1845 -740 { lab=DFF_1_1}
N 1845 -790 1845 -760 { lab=CLK}
N 1815 -800 1825 -800 { lab=DFF_1_1}
N 1815 -800 1815 -740 { lab=DFF_1_1}
N 2045 -800 2065 -800 { lab=DFF_1_1}
N 2045 -760 2065 -760 { lab=DFF_2_1}
N 1805 -640 1825 -640 { lab=DFF_1_2}
N 2025 -660 2045 -660 { lab=DFF_2_2}
N 2165 -680 2225 -680 { lab=out_2}
N 1585 -640 1625 -640 { lab=CLK}
N 1585 -620 1625 -620 { lab=vco_2}
N 1825 -700 2045 -700 { lab=DFF_1_2}
N 1825 -640 1845 -640 { lab=DFF_1_2}
N 1845 -690 1845 -660 { lab=CLK}
N 1815 -700 1825 -700 { lab=DFF_1_2}
N 1815 -700 1815 -640 { lab=DFF_1_2}
N 2045 -700 2065 -700 { lab=DFF_1_2}
N 2045 -660 2065 -660 { lab=DFF_2_2}
N 1810 -530 1830 -530 { lab=DFF_1_3}
N 2030 -550 2050 -550 { lab=DFF_2_3}
N 2170 -570 2230 -570 { lab=out_3}
N 1590 -530 1630 -530 { lab=CLK}
N 1590 -510 1630 -510 { lab=vco_3}
N 1830 -590 2050 -590 { lab=DFF_1_3}
N 1830 -530 1850 -530 { lab=DFF_1_3}
N 1850 -580 1850 -550 { lab=CLK}
N 1820 -590 1830 -590 { lab=DFF_1_3}
N 1820 -590 1820 -530 { lab=DFF_1_3}
N 2050 -590 2070 -590 { lab=DFF_1_3}
N 2050 -550 2070 -550 { lab=DFF_2_3}
N 1810 -425 1830 -425 { lab=DFF_1_4}
N 2030 -445 2050 -445 { lab=DFF_2_4}
N 2170 -465 2230 -465 { lab=out_4}
N 1590 -425 1630 -425 { lab=CLK}
N 1590 -405 1630 -405 { lab=vco_4}
N 1830 -485 2050 -485 { lab=DFF_1_4}
N 1830 -425 1850 -425 { lab=DFF_1_4}
N 1850 -475 1850 -445 { lab=CLK}
N 1820 -485 1830 -485 { lab=DFF_1_4}
N 1820 -485 1820 -425 { lab=DFF_1_4}
N 2050 -485 2070 -485 { lab=DFF_1_4}
N 2050 -445 2070 -445 { lab=DFF_2_4}
N 730 -670 770 -670 { lab=vco_0}
N 910 -670 950 -670 { lab=vco_1}
N 1090 -670 1130 -670 { lab=vco_2}
N 1270 -670 1310 -670 { lab=vco_3}
N 1270 -610 1310 -610 { lab=#net1}
N 1090 -610 1130 -610 { lab=#net2}
N 910 -610 950 -610 { lab=#net3}
N 730 -610 770 -610 { lab=pn_0}
N 660 -560 660 -530 { lab=V_ctrl}
N 660 -530 840 -530 { lab=V_ctrl}
N 840 -560 840 -530 { lab=V_ctrl}
N 840 -530 1020 -530 { lab=V_ctrl}
N 1020 -560 1020 -530 { lab=V_ctrl}
N 1020 -530 1200 -530 { lab=V_ctrl}
N 1200 -560 1200 -530 { lab=V_ctrl}
N 1200 -530 1380 -530 { lab=V_ctrl}
N 1380 -560 1380 -530 { lab=V_ctrl}
N 660 -750 660 -720 { lab=VDD_A}
N 660 -750 1380 -750 { lab=VDD_A}
N 1380 -750 1380 -720 { lab=VDD_A}
N 1200 -750 1200 -720 { lab=VDD_A}
N 1020 -750 1020 -720 { lab=VDD_A}
N 840 -750 840 -720 { lab=VDD_A}
N 1450 -670 1480 -670 { lab=vco_4}
N 1480 -810 1480 -670 { lab=vco_4}
N 540 -810 1480 -810 { lab=vco_4}
N 560 -490 1480 -490 { lab=#net4}
N 1480 -610 1480 -490 { lab=#net4}
N 1450 -610 1480 -610 { lab=#net4}
N 1020 -530 1020 -450 { lab=V_ctrl}
N 1020 -850 1020 -750 { lab=VDD_A}
N 750 -720 750 -670 { lab=vco_0}
N 930 -720 930 -670 { lab=vco_1}
N 1110 -720 1110 -670 { lab=vco_2}
N 1290 -720 1290 -670 { lab=vco_3}
N 1480 -670 1520 -670 { lab=vco_4}
N 750 -610 750 -560 { lab=pn_0}
N 715 -420 745 -420 { lab=pn_0}
N 580 -420 630 -420 { lab=VDD_A}
N 580 -380 630 -380 { lab=ENB}
N 710 -420 715 -420 { lab=pn_0}
N 965 -375 1020 -375 { lab=V_ctrl}
N 1020 -400 1020 -375 { lab=V_ctrl}
N 1020 -450 1020 -400 { lab=V_ctrl}
N 555 -420 580 -420 { lab=VDD_A}
N 555 -425 555 -420 { lab=VDD_A}
N 560 -610 560 -490 { lab=#net4}
N 560 -610 590 -610 { lab=#net4}
N 540 -810 540 -670 { lab=vco_4}
N 540 -670 590 -670 { lab=vco_4}
C {devices/vsource.sym} 50 -110 0 0 {name=Vsup_A value="DC=1.8"}
C {devices/vsource.sym} 255 -110 0 0 {name=V_in value="DC=0 SIN(0.8 0.4 1.5Meg 0 0 0)"}
C {devices/vsource.sym} 400 -120 0 0 {name=Venb1 value="DC=0 PULSE( 0 1.8 0 0.1n 0.1n 20n 1)"}
C {devices/vdd.sym} 50 -180 0 0 {name=l13 lab=VDD_A}
C {devices/gnd.sym} 50 -40 0 0 {name=l14 lab=GND}
C {devices/gnd.sym} 255 -40 0 0 {name=l15 lab=GND}
C {devices/gnd.sym} 400 -50 0 0 {name=l17 lab=GND}
C {devices/lab_pin.sym} 255 -160 2 0 {name=l18 sig_type=std_logic lab=input}
C {devices/lab_pin.sym} 400 -170 0 0 {name=l19 sig_type=std_logic lab=ENB}
C {devices/code.sym} 25 -575 0 0 {name=control only_toplevel=false value="
.control
    set nobreak
    set num_threads=10
    
    save \\"vdd_a\\" \\"vdd_d\\" @Vsup_a[i] @Vsup_d[i]
    save \\"input\\" \\"V_ctrl\\"
    save \\"vco_0\\" \\"vco_1\\" \\"vco_2\\" \\"vco_3\\" \\"vco_4\\"
    save \\"out_0\\" \\"out_1\\" \\"out_2\\" \\"out_3\\" \\"out_4\\"
    save \\"DFF_1_0\\" \\"DFF_2_0\\"
    save \\"DFF_1_1\\" \\"DFF_2_1\\"
    save \\"DFF_1_2\\" \\"DFF_2_2\\"
    save \\"DFF_1_3\\" \\"DFF_2_3\\"
    save \\"DFF_1_4\\" \\"DFF_2_4\\"
    save \\"CLK\\"
    TRAN 10n 2u

*Calculate Power of system
    MEAS TRAN I_vco AVG @Vsup_a[i] FROM=1u TO=2u
    MEAS TRAN V_vco AVG vdd_a FROM=1u TO=2u
    MEAS TRAN I_qz AVG @Vsup_d[i] FROM=1u TO=2u
    MEAS TRAN V_qz AVG vdd_d FROM=1u TO=2u
    let Power_vco=I_vco*V_vco
    let Power_qz=I_qz*V_qz
    let Power=Power_vco+Power_qz
    echo \\"The power of system is: \\"
    print Power

*Calculate Frequency of VCO
    MEAS TRAN prd TRIG vco_0 VAL=0.8 RISE=10 TARG vco_0 VAL=0.8 RISE=20
    let frequency=10/prd
    echo \\"The AVG frequency of VCO is: \\"
    print frequency
    plot vco_0+2 CLK+2 DFF_1_0 DFF_2_0 out_0-2
*    plot input V_ctrl V_ctrl-2 vco_0-2 V_ctrl-4 out_0-4
.endc
"}
C {devices/code.sym} 30 -420 0 0 {name=lib only_toplevel=false value="
** Library on VNU server
.lib /home/dkits/efabless/mpw-5/pdks/sky130A/libs.tech/ngspice/sky130.lib.spice tt
.inc /home/dkits/efabless/mpw-5/pdks/sky130A/libs.ref/sky130_fd_sc_hd/spice/sky130_fd_sc_hd.spice
"}
C {devices/code_shown.sym} 190 -570 0 0 {name=parameter only_toplevel=false value="
.param mc_mm_switch=0
.param L12=1.35
.param Wp12=4
.param Wn12=2
.param L34=0.5
.param Wp34=1
.param Wn34=0.5
"}
C {devices/res.sym} 935 -375 3 0 {name=R1
value=100
footprint=1206
device=resistor
m=1}
C {devices/res.sym} 980 -325 0 0 {name=R2
value=100
footprint=1206
device=resistor
m=1}
C {devices/gnd.sym} 980 -270 0 0 {name=l7 lab=GND}
C {devices/ipin.sym} 865 -375 0 0 {name=p1 lab=input}
C {devices/vsource.sym} 150 -110 0 0 {name=Vsup_D value="DC=1.8"}
C {devices/vdd.sym} 150 -180 0 0 {name=l8 lab=VDD_D}
C {devices/gnd.sym} 150 -40 0 0 {name=l9 lab=GND}
C {devices/vsource.sym} 680 -120 0 0 {name=Vclk value="DC=0 PULSE(0 1.8 0 0.001n 0.001n 2.499n 5n 0)"
*PULSE(0 1.8 0 0.001n 0.001n 6.2n 12.5n 0)" 80MHz}
C {devices/gnd.sym} 680 -50 0 0 {name=l10 lab=GND}
C {devices/lab_pin.sym} 680 -170 0 0 {name=l16 sig_type=std_logic lab=CLK}
C {devices/lab_pin.sym} 2220 -890 2 0 {name=l23 sig_type=std_logic lab=out_0}
C {sky130_stdcells/dfxtp_1.sym} 1710 -840 0 0 {name=x2 VGND=GND VNB=GND VPB=VDD_D VPWR=VDD_D prefix=sky130_fd_sc_hd__ }
C {sky130_stdcells/dfxtp_1.sym} 1930 -860 0 0 {name=x3 VGND=GND VNB=GND VPB=VDD_D VPWR=VDD_D prefix=sky130_fd_sc_hd__ }
C {sky130_stdcells/xor2_1.sym} 2120 -890 0 0 {name=x4 VGND=GND VNB=GND VPB=VDD_D VPWR=VDD_D prefix=sky130_fd_sc_hd__ }
C {devices/lab_wire.sym} 1610 -850 0 0 {name=l28 sig_type=std_logic lab=CLK}
C {devices/lab_wire.sym} 1840 -900 2 0 {name=l29 sig_type=std_logic lab=CLK}
C {devices/lab_wire.sym} 1810 -885 0 0 {name=l30 sig_type=std_logic lab=DFF_1_0}
C {devices/lab_wire.sym} 2030 -870 2 0 {name=l31 sig_type=std_logic lab=DFF_2_0}
C {devices/lab_wire.sym} 1610 -830 0 0 {name=l20 sig_type=std_logic lab=vco_0}
C {devices/lab_pin.sym} 2225 -780 2 0 {name=l21 sig_type=std_logic lab=out_1}
C {sky130_stdcells/dfxtp_1.sym} 1715 -730 0 0 {name=x1 VGND=GND VNB=GND VPB=VDD_D VPWR=VDD_D prefix=sky130_fd_sc_hd__ }
C {sky130_stdcells/dfxtp_1.sym} 1935 -750 0 0 {name=x5 VGND=GND VNB=GND VPB=VDD_D VPWR=VDD_D prefix=sky130_fd_sc_hd__ }
C {sky130_stdcells/xor2_1.sym} 2125 -780 0 0 {name=x6 VGND=GND VNB=GND VPB=VDD_D VPWR=VDD_D prefix=sky130_fd_sc_hd__ }
C {devices/lab_wire.sym} 1615 -740 0 0 {name=l22 sig_type=std_logic lab=CLK}
C {devices/lab_wire.sym} 1845 -790 2 0 {name=l24 sig_type=std_logic lab=CLK}
C {devices/lab_wire.sym} 1815 -775 0 0 {name=l25 sig_type=std_logic lab=DFF_1_1}
C {devices/lab_wire.sym} 2035 -760 2 0 {name=l26 sig_type=std_logic lab=DFF_2_1}
C {devices/lab_wire.sym} 1615 -720 0 0 {name=l27 sig_type=std_logic lab=vco_1}
C {devices/lab_pin.sym} 2225 -680 2 0 {name=l32 sig_type=std_logic lab=out_2}
C {sky130_stdcells/dfxtp_1.sym} 1715 -630 0 0 {name=x7 VGND=GND VNB=GND VPB=VDD_D VPWR=VDD_D prefix=sky130_fd_sc_hd__ }
C {sky130_stdcells/dfxtp_1.sym} 1935 -650 0 0 {name=x8 VGND=GND VNB=GND VPB=VDD_D VPWR=VDD_D prefix=sky130_fd_sc_hd__ }
C {sky130_stdcells/xor2_1.sym} 2125 -680 0 0 {name=x9 VGND=GND VNB=GND VPB=VDD_D VPWR=VDD_D prefix=sky130_fd_sc_hd__ }
C {devices/lab_wire.sym} 1615 -640 0 0 {name=l33 sig_type=std_logic lab=CLK}
C {devices/lab_wire.sym} 1845 -690 2 0 {name=l34 sig_type=std_logic lab=CLK}
C {devices/lab_wire.sym} 1815 -675 0 0 {name=l35 sig_type=std_logic lab=DFF_1_2}
C {devices/lab_wire.sym} 2035 -660 2 0 {name=l36 sig_type=std_logic lab=DFF_2_2}
C {devices/lab_wire.sym} 1615 -620 0 0 {name=l37 sig_type=std_logic lab=vco_2}
C {devices/lab_pin.sym} 2230 -570 2 0 {name=l38 sig_type=std_logic lab=out_3}
C {sky130_stdcells/dfxtp_1.sym} 1720 -520 0 0 {name=x10 VGND=GND VNB=GND VPB=VDD_D VPWR=VDD_D prefix=sky130_fd_sc_hd__ }
C {sky130_stdcells/dfxtp_1.sym} 1940 -540 0 0 {name=x11 VGND=GND VNB=GND VPB=VDD_D VPWR=VDD_D prefix=sky130_fd_sc_hd__ }
C {sky130_stdcells/xor2_1.sym} 2130 -570 0 0 {name=x12 VGND=GND VNB=GND VPB=VDD_D VPWR=VDD_D prefix=sky130_fd_sc_hd__ }
C {devices/lab_wire.sym} 1620 -530 0 0 {name=l39 sig_type=std_logic lab=CLK}
C {devices/lab_wire.sym} 1850 -580 2 0 {name=l40 sig_type=std_logic lab=CLK}
C {devices/lab_wire.sym} 1820 -565 0 0 {name=l41 sig_type=std_logic lab=DFF_1_3}
C {devices/lab_wire.sym} 2040 -550 2 0 {name=l42 sig_type=std_logic lab=DFF_2_3}
C {devices/lab_wire.sym} 1620 -510 0 0 {name=l43 sig_type=std_logic lab=vco_3}
C {devices/lab_pin.sym} 2230 -465 2 0 {name=l44 sig_type=std_logic lab=out_4}
C {sky130_stdcells/dfxtp_1.sym} 1720 -415 0 0 {name=x13 VGND=GND VNB=GND VPB=VDD_D VPWR=VDD_D prefix=sky130_fd_sc_hd__ }
C {sky130_stdcells/dfxtp_1.sym} 1940 -435 0 0 {name=x14 VGND=GND VNB=GND VPB=VDD_D VPWR=VDD_D prefix=sky130_fd_sc_hd__ }
C {sky130_stdcells/xor2_1.sym} 2130 -465 0 0 {name=x15 VGND=GND VNB=GND VPB=VDD_D VPWR=VDD_D prefix=sky130_fd_sc_hd__ }
C {devices/lab_wire.sym} 1620 -425 0 0 {name=l45 sig_type=std_logic lab=CLK}
C {devices/lab_wire.sym} 1850 -475 2 0 {name=l46 sig_type=std_logic lab=CLK}
C {devices/lab_wire.sym} 1820 -460 0 0 {name=l47 sig_type=std_logic lab=DFF_1_4}
C {devices/lab_wire.sym} 2040 -445 2 0 {name=l48 sig_type=std_logic lab=DFF_2_4}
C {devices/lab_wire.sym} 1620 -405 0 0 {name=l49 sig_type=std_logic lab=vco_4}
C {/home/userdata/k63D/toind_63d/Desktop/project/circuit_model/lib/cc_inv.sym} 660 -640 0 0 {name=Xi_1 L12=\\"L12\\" Wp12=\\"Wp12\\" Wn12=\\"Wn12\\"
 L34=\\"L34\\" Wp34=\\"Wp34\\" Wn34=\\"Wn34\\"}
C {/home/userdata/k63D/toind_63d/Desktop/project/circuit_model/lib/cc_inv.sym} 840 -640 0 0 {name=Xi_2 L12=\\"L12\\" Wp12=\\"Wp12\\" Wn12=\\"Wn12\\"
 L34=\\"L34\\" Wp34=\\"Wp34\\" Wn34=\\"Wn34\\"}
C {/home/userdata/k63D/toind_63d/Desktop/project/circuit_model/lib/cc_inv.sym} 1020 -640 0 0 {name=Xi_3 L12=\\"L12\\" Wp12=\\"Wp12\\" Wn12=\\"Wn12\\"
 L34=\\"L34\\" Wp34=\\"Wp34\\" Wn34=\\"Wn34\\"}
C {/home/userdata/k63D/toind_63d/Desktop/project/circuit_model/lib/cc_inv.sym} 1200 -640 0 0 {name=Xi_4 L12=\\"L12\\" Wp12=\\"Wp12\\" Wn12=\\"Wn12\\"
 L34=\\"L34\\" Wp34=\\"Wp34\\" Wn34=\\"Wn34\\"}
C {/home/userdata/k63D/toind_63d/Desktop/project/circuit_model/lib/cc_inv.sym} 1380 -640 0 0 {name=Xi_5 L12=\\"L12\\" Wp12=\\"Wp12\\" Wn12=\\"Wn12\\"
 L34=\\"L34\\" Wp34=\\"Wp34\\" Wn34=\\"Wn34\\"}
C {devices/vdd.sym} 1020 -850 0 0 {name=l51 lab=VDD_A}
C {sky130_stdcells/einvp_1.sym} 670 -420 0 0 {name=x16 VGND=GND VNB=GND VPB=VDD_A VPWR=VDD_A prefix=sky130_fd_sc_hd__ }
C {devices/lab_pin.sym} 580 -380 0 0 {name=l52 sig_type=std_logic lab=ENB}
C {devices/lab_pin.sym} 745 -420 2 0 {name=l54 sig_type=std_logic lab=pn_0}
C {devices/lab_pin.sym} 750 -560 0 0 {name=l55 sig_type=std_logic lab=pn_0}
C {devices/lab_wire.sym} 750 -720 0 0 {name=l56 sig_type=std_logic lab=vco_0}
C {devices/lab_wire.sym} 930 -720 0 0 {name=l57 sig_type=std_logic lab=vco_1}
C {devices/lab_wire.sym} 1110 -720 0 0 {name=l58 sig_type=std_logic lab=vco_2}
C {devices/lab_wire.sym} 1290 -720 0 0 {name=l59 sig_type=std_logic lab=vco_3}
C {devices/lab_wire.sym} 1520 -670 2 0 {name=l60 sig_type=std_logic lab=vco_4}
C {devices/lab_wire.sym} 1020 -375 2 0 {name=l61 sig_type=std_logic lab=V_ctrl}
C {devices/vdd.sym} 555 -425 0 0 {name=l1 lab=VDD_A}
